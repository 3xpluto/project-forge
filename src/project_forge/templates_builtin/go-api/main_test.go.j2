package main

import (
  "net/http"
  "net/http/httptest"
  "testing"
)

func TestHealth(t *testing.T) {
  req := httptest.NewRequest("GET", "/health", nil)
  w := httptest.NewRecorder()

  handler := http.HandlerFunc(func(rw http.ResponseWriter, r *http.Request) {
    if r.URL.Path != "/health" {
      rw.WriteHeader(404)
      return
    }
    rw.WriteHeader(200)
  })
  handler.ServeHTTP(w, req)

  if w.Code != 200 {
    t.Fatalf("expected 200, got %d", w.Code)
  }
}
